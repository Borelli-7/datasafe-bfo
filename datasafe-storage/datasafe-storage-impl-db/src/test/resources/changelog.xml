<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet id="users-create" author="maxim.grischenko">
        <createTable tableName="users">
            <column name="id" type="bigint" autoIncrement="true"/>
            <column name="name" type="varchar(250)" />
        </createTable>
    </changeSet>

    <changeSet id="private_profiles-create" author="maxim.grischenko">
        <createTable tableName="private_profiles">
            <column name="id" type="bigint" autoIncrement="true"/>
            <column name="user_id" type="bigint"/>
            <column name="key" type="varchar(512)" />
            <column name="value" type="varchar(512)" />
        </createTable>
    </changeSet>

    <changeSet id="public_profiles-create" author="maxim.grischenko">
        <createTable tableName="public_profiles">
            <column name="id" type="bigint" autoIncrement="true"/>
            <column name="user_id" type="bigint"/>
            <column name="key" type="varchar(512)" />
            <column name="value" type="varchar(512)" />
        </createTable>
    </changeSet>

    <changeSet id="users-add_pk" author="maxim.grischenko">
        <addPrimaryKey columnNames="id" constraintName="p_users" tableName="users" />
    </changeSet>

    <!--<changeSet id="achievements-add_uk" author="maxim.grischenko">-->
        <!--<addUniqueConstraint-->
                <!--columnNames="memberid, raceid"-->
                <!--constraintName="u_achievements"-->
                <!--tableName="achievements" />-->
    <!--</changeSet>-->

    <!--<changeSet id="h2-constraints-id" author="maxim.grischenko">-->
        <!--<preConditions onFail="MARK_RAN">-->
            <!--<dbms type="h2" />-->
        <!--</preConditions>-->
        <!--<addNotNullConstraint tableName="users" columnName="id" columnDataType="bigint" />-->
        <!--<addNotNullConstraint tableName="private_profiles" columnName="id" columnDataType="bigint" />-->
        <!--<addNotNullConstraint tableName="public_profiles" columnName="id" columnDataType="bigint" />-->
    <!--</changeSet>-->

    <!--<changeSet id="private_profiles-create" author="maxim.grischenko">-->
        <!--<createIndex-->
                <!--indexName="i_races$status"-->
                <!--tableName="races"-->
                <!--unique="false">-->
            <!--<column name="statusid" type="varchar(2)" />-->
        <!--</createIndex>-->
    <!--</changeSet>-->

    <!--<changeSet id="races-add_pk" author="maxim.grischenko">-->
        <!--<addPrimaryKey-->
                <!--columnNames="id"-->
                <!--constraintName="p_races"-->
                <!--tableName="races" />-->
    <!--</changeSet>-->

</databaseChangeLog>